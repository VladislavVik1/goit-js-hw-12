{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst MY_KEY = '49320414-34c235123b434a4e0d748057d';\n\nexport async function getRequest(request, page = 1, perPage = 15) {\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: { \n                key: MY_KEY,\n                q: request,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: perPage,\n            }\n        });\n        return response;\n    } catch (error) {\n        console.error(\"Error fetching data from Pixabay API:\", error);\n        throw error;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nlet lightbox;\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function renderGallery(images) {\n    const markup = images.map(image => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" height=\"240\" />\n            </a>\n            <div class=\"description-container\">\n                <div class=\"description\">\n                    <p class=\"gallery-item-text\">Likes</p>\n                    <span>${image.likes}</span>\n                </div>\n                <div class=\"description\">\n                    <p class=\"gallery-item-text\">Views</p>\n                    <span>${image.views}</span>\n                </div>\n                <div class=\"description\">\n                    <p class=\"gallery-item-text\">Comments</p>\n                    <span>${image.comments}</span>\n                </div>\n                <div class=\"description\">\n                    <p class=\"gallery-item-text\">Downloads</p>\n                    <span>${image.downloads}</span>\n                </div>\n            </div>\n        </li>`\n    ).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n    } else {\n        lightbox.refresh();\n    }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getRequest } from \"./js/pixabay-api\";\nimport {renderGallery, clearGallery} from \"./js/render-functions\"\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst gallery = document.querySelector('.gallery');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nloadMoreBtn.classList.add('visually-hidden');\n\nform.addEventListener('submit', handleFormSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleFormSubmit(event) { \n    event.preventDefault();\n    \n    const getInputValue = document.querySelector('input[name=\"search-text\"]').value.trim();\n\n    if (getInputValue === '') { \n        iziToast.show({\n            title: 'Error',\n            message: 'Please enter a search query!'\n        });\n        return;\n    }\n\n    currentQuery = getInputValue;\n    currentPage = 1;\n    clearGallery(); // Очистити галерею\n    loadMoreBtn.classList.add('visually-hidden');\n\n    loader.classList.remove('visually-hidden');\n\n    try {\n        const response = await getRequest(currentQuery, currentPage);\n        totalHits = response.data.totalHits;\n\n        if (response.data.hits.length === 0) { \n            iziToast.show({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            });\n        } else {\n            renderGallery(response.data.hits);\n\n            if (response.data.hits.length < totalHits) {\n                loadMoreBtn.classList.remove('visually-hidden');\n            }\n        }\n    } catch (error) {\n        console.error(error);\n        iziToast.show({\n            title: 'Error',\n            message: 'Sorry, there was an error processing your request. Please try again!'\n        });\n    } finally {\n        loader.classList.add('visually-hidden');\n    }\n}\n\nasync function handleLoadMore() {\n    currentPage += 1;\n    loader.classList.remove('visually-hidden');\n\n    try {\n        const response = await getRequest(currentQuery, currentPage);\n        renderGallery(response.data.hits);\n\n        const totalLoadedImages = currentPage * 15;\n        if (totalLoadedImages >= totalHits) {\n            loadMoreBtn.classList.add('visually-hidden');\n            iziToast.show({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n\n        smoothScroll();\n    } catch (error) {\n        console.error(error);\n        iziToast.show({\n            title: 'Error',\n            message: 'Sorry, there was an error processing your request. Please try again!'\n        });\n    } finally {\n        loader.classList.add('visually-hidden');\n    }\n}\n\nfunction smoothScroll() {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (galleryItem) {\n        const { height } = galleryItem.getBoundingClientRect();\n        window.scrollBy({\n            top: height * 2,\n            behavior: 'smooth',\n        });\n    }\n}"],"names":["MY_KEY","getRequest","request","page","perPage","axios","error","gallery","lightbox","clearGallery","renderGallery","images","markup","image","SimpleLightbox","form","loader","loadMoreBtn","currentPage","currentQuery","totalHits","handleFormSubmit","handleLoadMore","event","getInputValue","iziToast","response","smoothScroll","galleryItem","height"],"mappings":"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"}